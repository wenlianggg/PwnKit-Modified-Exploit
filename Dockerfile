# syntax=docker/dockerfile:1
FROM ubuntu:focal

ENV DEBIAN_FRONTEND=noninteractive

RUN apt update
RUN apt install -y gcc make
RUN apt install -y libpolkit-gobject-1-0=0.105-26ubuntu1
RUN apt install -y libpolkit-agent-1-0=0.105-26ubuntu1
RUN apt install -y policykit-1=0.105-26ubuntu1
RUN apt install -y python3 software-properties-common wget curl

# add the user in with home directory
RUN useradd -m unprivileged

# copy the exploit script in
WORKDIR /home/unprivileged
COPY finder.py .
COPY exploit.py .
RUN chmod +x *.py

USER unprivileged

# dont do anything
CMD ["sleep", "10000000"]